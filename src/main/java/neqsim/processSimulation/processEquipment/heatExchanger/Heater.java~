/*
 * Heater.java
 *
 * Created on 15. mars 2001, 14:17
 */

package processSimulation.processEquipment.heatExchanger;

import processSimulation.processEquipment.*;
import thermo.system.*;
import thermodynamicOperations.flashOps.*;
import java.util.*;
import thermodynamicOperations.*;
import processSimulation.processEquipment.stream.*;

/**
 *
 * @author  Even Solbraa
 * @version
 */
public class Heater extends Object implements ProcessEquipmentInterface, HeaterInterface{
    
    ThermodynamicOperations testOps;
    boolean setTemperature=false;
    String name= new String();
    Stream outStream;
    Stream inStream;
    SystemInterface system;
    protected double temperatureOut =0, dT=0.0;
    double dH=0.0;
    /** Creates new Heater */
    public Heater() {
    }
    
    public Heater(Stream inStream) {
        this.inStream = inStream;
        outStream = (Stream) inStream.clone();
    }
    
    public void setName(String name){
        this.name = name;
    }
    
    
    public void setdT(double dT){
        this.dT = dT;
    }
    
    public Stream getOutStream(){
        return outStream;
    }
    
    public void setOutTemperature(double temperature){
        this.temperatureOut = temperature;
    }
    
    public void run(){
        system = (SystemInterface) inStream.getThermoSystem().clone();
        double oldH = system.getEnthalpy();
        if(setTemperature) system.setTemperature(temperatureOut);
        else system.setTemperature(system.getTemperature()+dT);
        testOps = new ThermodynamicOperations(system);
        system.setTemperature(temperatureOut);
        testOps.TPflash();
        double newH = system.getEnthalpy();
        dH = newH - oldH;
        // system.setTemperature(temperatureOut);
        //  testOps.TPflash();
        //    system.setTemperature(temperatureOut);
        outStream.setThermoSystem(system);
    }
    
    public void displayResult(){
        System.out.println("heater dH: " + dH);
    }
    
    public String getName() {
        return name;
    }
    
}
